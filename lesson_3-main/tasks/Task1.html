<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ITEA JS Advanced. Lesson 3: Task 1</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="wrap" id="wrap">
      <h1>Добавление списка элементов по условию</h1>

      <header>
        <input type="text" placeholder="" id="receiver" />
        <input type="submit" value="Add" id="addToList" />
      </header>

      <div>
        <div id="error"></div>
        <ul id="list"></ul>
      </div>
    </div>
    <script>
      /*
          Задание:

          Написать скрипт, который будет добавлять введенный в инпут Receiver текст
          в список list.
          Если в списке больше 5 записей, убирать Event с кнопки addToList.
          Кнопке addToList добавить disabled = true

          После каждого ввода очищать значение инпута

          Используемые методы:

          addEventListener
          removeEventListener

          document.getElementById
          document.createElement

          element.innerText
          element.setAttribute
          element.appendChild

          Получить значение инпута: receiver.value [receiver - это id]

      */

      const receiver = document.getElementById("receiver");
      const submitButton = document.getElementById("addToList");
      const list = document.getElementById("list");
      const errorDiv = document.getElementById("error");

      let listCount = 0;

      const addListItem = () => {
        listCount++;
        if (listCount <= 5) {
          let inputVaule = receiver.value;
          const listItem = document.createElement("li");
          listItem.innerHTML = inputVaule;
          list.appendChild(listItem);
          receiver.value = "";
        } else {
         errorDiv.innerHTML="The list is full, it can not contain more than 5 items";
         submitButton.removeEventListener('click', addListItem);
         submitButton.disabled = true
        }
      };

      submitButton.addEventListener("click", addListItem);

    </script>
  </body>
</html>
